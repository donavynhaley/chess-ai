{"ast":null,"code":"var _jsxFileName = \"/Users/donavynhaley/Documents/GitHub/chess-ai/chess-ai/src/components/pages/Game/Game.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport Chessboard from 'chessboardjsx';\nimport Chess from \"chess.js\";\nimport MoveHistory from './MoveHistory';\nimport DataVisualization from './DataVisualization';\nimport NavBar from '../../common/NavBar';\nimport randomBot from '../../bots/randomBot';\nimport SimpleModal from '../../common/SimpleModel';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst startingFen = \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\";\n\nfunction Game() {\n  _s();\n\n  const [chess] = useState(new Chess(startingFen));\n  const [allBots, setAllBots] = useState([\"Random\", \"MiniMax\", \"AlphaBeta\", \"Stockfish\"]);\n  const [fen, setFen] = useState(chess.fen());\n  const [movesHistory, setMovesHistory] = useState([]);\n  const [selectedBot, setSelectedBot] = useState(allBots[0]);\n  const [gameOverText, setGameOverText] = useState('');\n  const [randomBotAvaliableMoves, setRandomBotAvaliableMoves] = useState([]);\n  const [boardSize, setBoardSize] = useState(460);\n  const [openModal, setOpenModal] = useState(false);\n  const ref = useRef(null);\n  useEffect(() => {\n    setBoardSize(ref.current.offsetWidth - 40);\n  }, []);\n  useEffect(() => {\n    // Check for win\n    if (chess.game_over()) {\n      handleGameOver();\n    }\n  }); // Add playermove to history\n\n  const updatePlayerHistory = newMove => {\n    const currentMovesHistory = movesHistory;\n    const pieceType = chess.get(newMove.to).type.toUpperCase();\n    let move; // do not display pawn\n\n    if (pieceType === \"P\") {\n      move = {\n        playerMove: `${newMove.to}`\n      };\n    } else {\n      move = {\n        playerMove: `${pieceType}${newMove.to}`\n      };\n    }\n\n    currentMovesHistory.push(move);\n    setMovesHistory(currentMovesHistory);\n  }; // Add computer move to history\n\n\n  const updateComputerHistory = computerMove => {\n    const currentMove = movesHistory[movesHistory.length - 1];\n    const newMove = { ...currentMove,\n      computerMove: computerMove\n    };\n    movesHistory[movesHistory.length - 1] = newMove;\n  }; // Handles player move and calls bots move\n\n\n  const handlePlayerMove = playerMove => {\n    // Checks if playermove is valid\n    if (chess.move(playerMove)) {\n      // add move to history\n      updatePlayerHistory(playerMove); // computer response random\n\n      randomBot(chess, updateComputerHistory, setRandomBotAvaliableMoves, setFen); // update chessboard\n\n      setFen(chess.fen());\n    }\n  };\n\n  const resetGame = () => {\n    // reset board and game\n    setFen(startingFen);\n    chess.reset();\n    setMovesHistory([]);\n    setOpenModal(false);\n  };\n\n  const handleGameOver = () => {\n    // Check how game ended\n    if (chess.in_checkmate()) {\n      setGameOverText(\"Checkmate\");\n    }\n\n    if (chess.in_draw()) {\n      setGameOverText(\"Draw\");\n    }\n\n    if (chess.in_stalemate()) {\n      setGameOverText(\"Stalemate\");\n    }\n\n    if (chess.in_threefold_repetition()) {\n      setGameOverText(\"Threefold Repetition\");\n    }\n\n    if (chess.insufficient_material()) {\n      setGameOverText(\"Insufficient Material\");\n    } // Open game over modal\n\n\n    setOpenModal(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {\n      selectedBot: selectedBot,\n      setSelectedBot: setSelectedBot,\n      allBots: allBots\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-container\",\n      children: [/*#__PURE__*/_jsxDEV(SimpleModal, {\n        openModal: openModal,\n        setOpenModal: setOpenModal,\n        resetGame: resetGame,\n        title: \"Game Over\",\n        desc: `The game ended with a ${gameOverText}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chess-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: ref,\n          className: \"chessboard-container\",\n          children: /*#__PURE__*/_jsxDEV(Chessboard, {\n            width: boardSize,\n            position: fen,\n            onDrop: move => handlePlayerMove({\n              from: move.sourceSquare,\n              to: move.targetSquare,\n              promotion: \"q\"\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"utility-container\",\n        children: [/*#__PURE__*/_jsxDEV(MoveHistory, {\n          movesHistory: movesHistory\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DataVisualization, {\n          selectedBot: selectedBot,\n          randomBotAvaliableMoves: randomBotAvaliableMoves\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Game, \"yZJLnA87rdGod0T4NaOoFsca+tE=\");\n\n_c = Game;\nexport default Game;\n\nvar _c;\n\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"sources":["/Users/donavynhaley/Documents/GitHub/chess-ai/chess-ai/src/components/pages/Game/Game.js"],"names":["React","useState","useEffect","useRef","Chessboard","Chess","MoveHistory","DataVisualization","NavBar","randomBot","SimpleModal","startingFen","Game","chess","allBots","setAllBots","fen","setFen","movesHistory","setMovesHistory","selectedBot","setSelectedBot","gameOverText","setGameOverText","randomBotAvaliableMoves","setRandomBotAvaliableMoves","boardSize","setBoardSize","openModal","setOpenModal","ref","current","offsetWidth","game_over","handleGameOver","updatePlayerHistory","newMove","currentMovesHistory","pieceType","get","to","type","toUpperCase","move","playerMove","push","updateComputerHistory","computerMove","currentMove","length","handlePlayerMove","resetGame","reset","in_checkmate","in_draw","in_stalemate","in_threefold_repetition","insufficient_material","from","sourceSquare","targetSquare","promotion"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\nimport Chessboard from 'chessboardjsx';\nimport Chess from \"chess.js\";\nimport MoveHistory from './MoveHistory';\nimport DataVisualization from './DataVisualization';\nimport NavBar from '../../common/NavBar';\nimport randomBot from '../../bots/randomBot';\nimport SimpleModal from '../../common/SimpleModel';\n\nconst startingFen = \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\"\nfunction Game() {\n    const [chess] = useState(new Chess(startingFen));\n    const [allBots, setAllBots] = useState([\"Random\", \"MiniMax\", \"AlphaBeta\", \"Stockfish\"])\n    const [fen, setFen] = useState(chess.fen());\n    const [movesHistory, setMovesHistory] = useState([]);\n    const [selectedBot, setSelectedBot] = useState(allBots[0]);\n    const [gameOverText, setGameOverText] = useState('');\n    const [randomBotAvaliableMoves, setRandomBotAvaliableMoves] = useState([]);\n    const [boardSize, setBoardSize] = useState(460);\n    const [openModal, setOpenModal] = useState(false)\n    const ref = useRef(null);\n\n    useEffect(() => {\n        setBoardSize(ref.current.offsetWidth - 40);\n\n    }, [])\n\n    useEffect(() => {\n        // Check for win\n        if (chess.game_over()) {\n            handleGameOver();\n        }\n    })\n\n    // Add playermove to history\n    const updatePlayerHistory = (newMove) => {\n        const currentMovesHistory = movesHistory;\n        const pieceType = chess.get(newMove.to).type.toUpperCase();\n        let move;\n\n        // do not display pawn\n        if (pieceType === \"P\") {\n            move = { playerMove: `${newMove.to}` }\n        }\n        else {\n            move = { playerMove: `${pieceType}${newMove.to}` }\n        }\n\n        currentMovesHistory.push(move);\n        setMovesHistory(currentMovesHistory);\n    }\n\n    // Add computer move to history\n    const updateComputerHistory = (computerMove) => {\n        const currentMove = movesHistory[movesHistory.length - 1];\n        const newMove = { ...currentMove, computerMove: computerMove }\n        movesHistory[movesHistory.length - 1] = newMove;\n    }\n\n    // Handles player move and calls bots move\n    const handlePlayerMove = (playerMove) => {\n        // Checks if playermove is valid\n        if (chess.move(playerMove)) {\n\n            // add move to history\n            updatePlayerHistory(playerMove);\n\n            // computer response random\n            randomBot(chess, updateComputerHistory, setRandomBotAvaliableMoves, setFen)\n\n            // update chessboard\n            setFen(chess.fen());\n        }\n    }\n\n    const resetGame = () => {\n        // reset board and game\n        setFen(startingFen);\n        chess.reset();\n        setMovesHistory([]);\n        setOpenModal(false)\n    }\n\n    const handleGameOver = () => {\n        // Check how game ended\n        if (chess.in_checkmate()) {\n            setGameOverText(\"Checkmate\")\n        }\n        if (chess.in_draw()) {\n            setGameOverText(\"Draw\")\n        }\n        if (chess.in_stalemate()) {\n            setGameOverText(\"Stalemate\")\n        }\n        if (chess.in_threefold_repetition()) {\n            setGameOverText(\"Threefold Repetition\")\n        }\n        if (chess.insufficient_material()) {\n            setGameOverText(\"Insufficient Material\")\n        }\n\n        // Open game over modal\n        setOpenModal(true)\n\n    }\n\n\n    return (\n        <>\n            <NavBar selectedBot={selectedBot} setSelectedBot={setSelectedBot} allBots={allBots} />\n            <div className=\"app-container\">\n                <SimpleModal openModal={openModal} setOpenModal={setOpenModal} resetGame={resetGame} title={\"Game Over\"} desc={`The game ended with a ${gameOverText}`} />\n                <div className=\"chess-container\">\n                    <div ref={ref} className=\"chessboard-container\">\n                        <Chessboard\n                            width={boardSize}\n                            position={fen}\n                            onDrop={(move) => handlePlayerMove({\n                                from: move.sourceSquare,\n                                to: move.targetSquare,\n                                promotion: \"q\",\n                            })}\n                        />\n                    </div>\n                </div>\n                <div className=\"utility-container\">\n                    <MoveHistory movesHistory={movesHistory} />\n                    <DataVisualization selectedBot={selectedBot} randomBotAvaliableMoves={randomBotAvaliableMoves} />\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default Game;\n"]},"metadata":{},"sourceType":"module"}