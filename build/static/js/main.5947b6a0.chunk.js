(this["webpackJsonpchess-ai"]=this["webpackJsonpchess-ai"]||[]).push([[0],{187:function(e,t,n){},188:function(e,t,n){},342:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(11),o=n.n(s),r=(n(187),n(188),n(7)),i=n(159),l=n.n(i),d=n(89),j=n.n(d),u=n(2),b=function(e){var t=e.movesHistory,n=e.className,a=0;return Object(u.jsxs)("div",{className:"move-history",children:[n?"":Object(u.jsx)("h2",{children:"Move History"}),Object(u.jsx)("ul",{className:"move-list ".concat(n||""),children:t.map((function(e,t,n){if(t%2===0)return a++,Object(u.jsxs)("li",{className:"node",children:[Object(u.jsxs)("div",{className:"line-number",children:[a,"."]}),Object(u.jsxs)("div",{className:"move",children:[Object(u.jsx)("div",{className:"playerNode",children:e}),Object(u.jsx)("div",{className:"playerNode",children:n[t+1]})]})]},t)}))})]})},h=n(388),p=n(160),m=n.n(p),O=function(e){var t=e.data;return Object(u.jsx)("div",{id:"treeWrapper",children:Object(u.jsx)(m.a,{data:t,depthFactor:1e3,initialDepth:2,rootNodeClassName:"node__root",branchNodeClassName:"node__branch",leafNodeClassName:"node__leaf",pathFunc:"step"})})},v=n(400),f=function(e){var t=e.onClick,n=e.text;return Object(u.jsx)("button",{className:"btn dark",onClick:t,children:n})},g=function e(t){var n=t.openModal,a=t.setOpenModal,c=t.title,s=t.desc,o=t.onClick,r=t.buttonText,i=Object(u.jsxs)("div",{className:"simple-modal-content",children:[Object(u.jsx)("h2",{className:"simple-modal-title",children:c}),Object(u.jsx)("div",{className:"simple-modal-description",children:s}),r?Object(u.jsx)(f,{onClick:o,text:r}):null,Object(u.jsx)(e,{})]});return Object(u.jsx)("div",{className:"modal-container",children:Object(u.jsx)(v.a,{open:n,onClose:function(){a(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:i})})},x=function(e){var t=e.selectedBot,n=e.randomBotAvaliableMoves,c=e.allBots,s=e.evalCount,o=e.treeData,i=Object(a.useState)(!1),l=Object(r.a)(i,2),d=l[0],j=l[1],b=function(){j(!1)},p=function(){console.log("opens"),j(!0)};return Object(u.jsxs)("div",{className:"data-visualization",children:[Object(u.jsx)("h2",{children:"Data Visualization"}),c[0]===t?function(){var e=n.map((function(e){return Object(u.jsx)("li",{children:e})}));return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{children:"Selecting random from avaliable moves"}),Object(u.jsx)("ul",{className:"avaliable-moves",children:e&&e})]})}():null,c[1]===t||c[2]===t?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(g,{openModal:d,setOpenModal:j,title:"Tree",desc:Object(u.jsx)(O,{data:o}),onClick:b,buttonText:"Close Modal"}),Object(u.jsxs)("div",{className:"evaluation",children:[Object(u.jsx)("h3",{children:"Postions Evaluated"})," ",Object(u.jsx)("p",{children:s.toLocaleString()})]}),Object(u.jsx)(h.a,{size:"large",variant:"outlined",color:"secondary",onClick:p,children:"See Tree"})]}):null]})},N=n(391),S=n(404),P=n(405),I=n(392),k=n(399),w=Object(N.a)((function(e){return{button:{display:"block",marginTop:e.spacing(2),color:"white"},formControl:{margin:e.spacing(1),minWidth:120},select:{color:"white",minWidth:120}}})),y=function(e){var t=e.selected,n=e.setSelected,c=e.allOptions,s=e.title,o=Object(a.useState)(!1),i=Object(r.a)(o,2),l=i[0],d=i[1],j=w();return Object(u.jsx)("div",{className:"select-bot-container",children:Object(u.jsx)(I.a,{className:j.formControl,children:Object(u.jsxs)("div",{children:[Object(u.jsx)(S.a,{className:j.select,id:"select-label",children:s}),Object(u.jsx)(k.a,{labelId:"select-label",id:"open-select",open:l,onClose:function(){d(!1)},onOpen:function(){d(!0)},value:t,onChange:function(e){n(e.target.value)},className:j.select,children:c&&c.map((function(e,t){return"string"==typeof e||"number"==typeof e?Object(u.jsx)(P.a,{value:e,children:e},t):Object(u.jsx)(P.a,{value:e.fen,children:e.name},t)}))})]})})})},M=n(13),L=n(171),C=n(406),B=n(73),R=n(99),D=n(61),T=n.n(D),q=R.a().shape({email:R.b().email("Invalid email").required("Required"),password:R.b().required("No password provided.").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,"Password must contain at least one uppercase letter, one lowercase letter, one number and one special character")}),A={email:"",password:""},z=function(e){var t=e.isLogin,n=e.setOpenModal,a=e.setIsLoggedIn,c=T.a.create({baseURL:"https://chess-ai-visualizer.herokuapp.com/"}),s=function(e){var s;"Login"===t?(s=e,c.post("login",s).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("email",e.data.email),console.log(e.data),a(!0),o(s),n(!1)})).catch((function(e){console.log(e)}))):function(e){c.post("register",e).then((function(t){console.log(t.data),o(e),n(!1)})).catch((function(e){console.log(e)}))}(e)},o=function(e){Object.keys(e).forEach((function(t){return e[t]=""}))};return Object(u.jsx)(B.c,{initialValues:A,validationSchema:q,onSubmit:function(e){s(e)},children:function(e){var t=e.errors,n=e.touched;return Object(u.jsxs)(B.b,{className:"form",children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)(B.a,{name:"email",type:"email",className:"input ".concat(t.email&&n.namemaile?"input-error":""),placeholder:"Email"}),t.email&&n.email?Object(u.jsx)("div",{className:"error",children:t.email}):null]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)(B.a,{name:"password",type:"password",className:"input ".concat(t.password&&n.password?"input-error":""),placeholder:"Password",id:"password-input"}),t.password&&n.password?Object(u.jsx)("div",{className:"error",children:t.password}):null]}),Object(u.jsx)(h.a,{type:"submit",variant:"outlined",color:"secondary",children:"Submit"})]})}})},_=function(e){var t=e.isLoggedIn,n=e.setIsLoggedIn,c=Object(a.useState)(),s=Object(r.a)(c,2),o=s[0],i=s[1],l=Object(a.useState)(!1),d=Object(r.a)(l,2),j=d[0],b=d[1],h=Object(a.useState)(""),p=Object(r.a)(h,2),m=p[0],O=p[1],v=Object(M.f)(),f=function(){i(!1)},x=function(e){O(e),"Login"!==e&&"Register"!==e||(f(),b(!0)),"Home"===e&&v.push("/"),"Previous Games"===e&&v.push("/games"),"Sign Out"===e&&(localStorage.removeItem("email"),localStorage.removeItem("token"),window.location.reload())},N=Object(u.jsx)(z,{isLogin:m,setOpenModal:b,setIsLoggedIn:n});return Object(u.jsxs)("div",{children:[Object(u.jsx)(g,{openModal:j,setOpenModal:b,title:m,desc:N}),Object(u.jsx)(C.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)}}),Object(u.jsx)(L.a,{id:"simple-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:f,children:t?["Home","Previous Games","Sign Out"].map((function(e){return Object(u.jsx)(P.a,{onClick:function(){return x(e)},children:e})})):["Login","Register"].map((function(e){return Object(u.jsx)(P.a,{onClick:function(){return x(e)},children:e})}))})]})},F=function(e){var t=e.selectedBot,n=e.setSelectedBot,a=e.allBots,c=e.selectedPos,s=e.setSelectedPos,o=e.allStartingPositions,r=e.depth,i=e.setDepth,l=e.allDepth,d=e.className,j=e.isLoggedIn,b=e.setIsLoggedIn;return Object(u.jsxs)("div",{className:"navbar ".concat(d),children:[Object(u.jsx)("h1",{children:"Chess AI"}),t?Object(u.jsxs)("div",{className:"selections",children:[Object(u.jsx)(y,{selected:t,setSelected:n,allOptions:a,title:"Select Bot"}),Object(u.jsx)(y,{selected:c,setSelected:s,allOptions:o,title:"Starting Position"}),Object(u.jsx)(y,{selected:r,setSelected:i,allOptions:l,title:"Algorithim Depth"})]}):null,Object(u.jsx)(_,{isLoggedIn:j,setIsLoggedIn:b})]})},K=function(e,t,n,a){setTimeout((function(){var c=e.moves();if(n(c),c.length>0){var s=c[Math.floor(Math.random()*c.length)];e.move(s),t(s),a(e.fen())}}),300)},E=n(117),Q=n.n(E),H=n(168),W=new Map;W.p=128,W.n=781,W.b=825,W.r=1276,W.q=2538,W.k=9999,W.P=-128,W.N=-781,W.B=-825,W.R=-1276,W.Q=-2538,W.K=-9999;var G=function(e){for(var t=0,n=0;n<e.length&&" "!==e.charAt(n);n++)void 0!==W[e.charAt(n)]&&(t+=W[e.charAt(n)]);return t},U=function e(t,n,a,c){if(0===n)return[null,G(t.fen())];var s=t.moves(),o=s[Math.floor(Math.random()*s.length)];if(c){for(var r=-1/0,i=0;i<s.length;i++){t.move(s[i]),a[n-1].push({score:G(t.fen()),move:s[i],currentMove:i,totalMoves:s.length-1,isMax:!0});var l=e(t,n-1,a,!1)[1];t.undo(),l>r&&(r=l,o=s[i])}return[o,r]}for(var d=1/0,j=0;j<s.length;j++){t.move(s[j]),a[n-1].push({score:G(t.fen()),move:s[j],currentMove:j,totalMoves:s.length-1,isMax:!0});var u=e(t,n-1,a,!0)[1];t.undo(),u<d&&(d=u,o=s[j])}return[o,d]},$=function(){var e=Object(H.a)(Q.a.mark((function e(t,n,a,c){var s,o;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t,n,a,c);case 2:return 0===(s=e.sent)[1]&&(o=t.moves(),s[0]=o[J(0,o.length)]),e.abrupt("return",s[0]);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}(),J=function(e,t){return Math.floor(Math.random()*(t-e)+e)},V=function(e,t,n,a,c,s){var o=[[],[],[]],r={name:"Start",attributes:{score:G(e.fen())},children:[]},i=new j.a(e.fen());$(i,s,o,!0).then((function(i){e.move(i),console.log(o);var l=o.map((function(e){return e.length}));a(l.reduce((function(e,t){return e+t}),0)),c(function(e,t,n){var a=n-1;if(a<0)return t;for(var c=0;c<e[a].length;c++)t.children.push({name:e[a][c].move,attributes:{score:e[a][c].score},children:[]});if((a-=1)<0)return t;for(var s=0,o=0;o<e[a].length;o++)t.children[s].children.push({name:e[a][o].move,attributes:{score:e[a][o].score},children:[]}),e[a][o].currentMove===e[a][o].totalMoves&&(s+=1);s=0;var r=0;if((a-=1)<0)return t;for(var i=0;i<e[a].length;i++)t.children[r].children[s].children.push({name:e[a][i].move,attributes:{score:e[a][i].score},children:[]}),e[a][i].currentMove===e[a][i].totalMoves&&(s+=1)>=t.children[r].children.length&&(r+=1,s=0);return t}(o,r,s)),t(),n(e.fen())}))},Z=n(118),Y=n(395),X=n(402);function ee(e){return Object(u.jsx)(Y.a,Object(Z.a)(Object(Z.a)({},e),{},{direction:"up"}))}var te=function(e){e.text,e.severity;var t=e.openAlert,n=e.setOpenAlert;return Object(u.jsx)("div",{children:Object(u.jsx)(X.a,{open:t,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&n(!1)},TransitionComponent:ee})})},ne=n(169),ae=n.n(ne),ce=function(e){var t=e.undo;return Object(u.jsx)("div",{className:"undo-move",children:Object(u.jsxs)(h.a,{variant:"outlined",color:"secondary",onClick:t,children:[Object(u.jsx)(ae.a,{})," Undo"]})})},se="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",oe=["Random","MiniMax","AlphaBeta"],re=[{name:"Start",fen:se},{name:"Caro-Kann Defense",fen:"rnbqkbnr/pp1ppppp/2p5/8/4P3/8/PPPP1PPP/RNBQKBNR w KQkq - 0 1"},{name:"Pirc Defense",fen:"rnbqkbnr/ppp1pppp/3p4/8/4P3/8/PPPP1PPP/RNBQKBNR w KQkq - 0 1"},{name:"Sicilian Defense",fen:"rnbqkbnr/pp1ppppp/8/2p5/4P3/8/PPPP1PPP/RNBQKBNR w KQkq c6 0 1"},{name:"French Defense",fen:"rnbqkbnr/pppp1ppp/4p3/8/4P3/8/PPPP1PPP/RNBQKBNR w KQkq - 0 1"}],ie=[1,2,3];var le=function(e){var t=e.isLoggedIn,n=e.setIsLoggedIn,c=Object(a.useState)(new j.a(se)),s=Object(r.a)(c,1)[0],o=Object(a.useState)(s.fen()),i=Object(r.a)(o,2),d=i[0],h=i[1],p=Object(a.useState)([]),m=Object(r.a)(p,2),O=m[0],v=m[1],f=Object(a.useState)(oe[1]),N=Object(r.a)(f,2),S=N[0],P=N[1],I=Object(a.useState)(re[0].fen),k=Object(r.a)(I,2),w=k[0],y=k[1],M=Object(a.useState)(0),L=Object(r.a)(M,2),C=L[0],B=L[1],R=Object(a.useState)(""),D=Object(r.a)(R,2),q=D[0],A=D[1],z=Object(a.useState)(!1),_=Object(r.a)(z,2),E=_[0],Q=_[1],H=Object(a.useState)([]),W=Object(r.a)(H,2),G=W[0],U=W[1],$=Object(a.useState)({}),J=Object(r.a)($,2),Z=J[0],Y=J[1],X=Object(a.useState)(460),ee=Object(r.a)(X,2),ne=ee[0],ae=ee[1],le=Object(a.useState)(!1),de=Object(r.a)(le,2),je=de[0],ue=de[1],be=Object(a.useState)(ie[1]),he=Object(r.a)(be,2),pe=he[0],me=he[1],Oe=Object(a.useState)(!1),ve=Object(r.a)(Oe,2),fe=ve[0],ge=ve[1],xe=Object(a.useState)(""),Ne=Object(r.a)(xe,2),Se=Ne[0],Pe=(Ne[1],Object(a.useState)("")),Ie=Object(r.a)(Pe,2),ke=Ie[0],we=(Ie[1],Object(a.useRef)(null));Object(a.useEffect)((function(){console.log("resize");var e=function(){var e=we.current.offsetWidth;e<1200?ae(e-100):e<=1920?ae(e-700):e>=1800&&ae(e-1e3),localStorage.getItem("token")&&n(!0)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(a.useEffect)((function(){Me()}),[w]),Object(a.useEffect)((function(){s.game_over()&&Le()}),[O]);var ye=function(){console.log(s.history()),v(s.history())},Me=function(){h(w),s.load(w),v([]),ue(!1)},Le=function(){"b"===s.turn()?Q(!0):Q(!1),s.in_checkmate()?A("Checkmate"):s.in_draw()?A("Draw"):s.in_stalemate()?A("Stalemate"):s.in_threefold_repetition()?A("Threefold Repetition"):s.insufficient_material()&&A("Insufficient Material"),ue(!0),t&&Ce()},Ce=function(){var e={game:{result:E,botType:S,depth:pe,moves:O},email:localStorage.getItem("email")},t={headers:{Authorization:"Basic ".concat(localStorage.getItem("token"))}};T.a.create({baseURL:"https://chess-ai-visualizer.herokuapp.com/"}).post("add-game",e,t).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(F,{selectedBot:S,setSelectedBot:P,allBots:oe,selectedPos:w,setSelectedPos:y,allStartingPositions:re,depth:pe,setDepth:me,allDepth:ie,isLoggedIn:t,setIsLoggedIn:n}),Object(u.jsx)(te,{text:Se,severity:ke,openAlert:fe,setOpenAlert:ge}),Object(u.jsxs)("div",{className:"app-container",children:[Object(u.jsx)(g,{openModal:je,setOpenModal:ue,title:"Game Over You ".concat(E?"Won":"Lost"),desc:"The game ended with a ".concat(q),onClick:Me,buttonText:"Play Again?"}),Object(u.jsx)("div",{className:"chess-container",ref:we,children:Object(u.jsx)(l.a,{width:ne,position:d,onDrop:function(e){return t={from:e.sourceSquare,to:e.targetSquare,promotion:"q"},void(s.move(t)&&(h(s.fen()),S===oe[0]?K(s,ye,U,h):S===oe[1]&&V(s,ye,h,B,Y,pe)));var t},className:"test"})}),Object(u.jsxs)("div",{className:"utility-container",children:[Object(u.jsx)(b,{movesHistory:O}),Object(u.jsx)(ce,{undo:function(){s.undo(),s.undo(),h(s.fen),ye()}}),Object(u.jsx)(x,{selectedBot:S,randomBotAvaliableMoves:G,allBots:oe,evalCount:C,treeData:Z})]})]})]})},de=n(394),je=n(396),ue=n(401),be=n(403),he=n(397),pe=n(170),me=n.n(pe),Oe=function(e){var t=e.result,n=e.botType,a=e.depth,c=e.moveHistory;return Object(u.jsx)("div",{children:Object(u.jsxs)(de.a,{className:"recap-container",elevation:3,children:[Object(u.jsx)("div",{className:"recap-header",children:Object(u.jsx)("h3",{children:t})}),Object(u.jsx)(je.a,{}),Object(u.jsxs)("div",{className:"recap-subheader",children:[Object(u.jsxs)("div",{className:"recap-info",children:[Object(u.jsx)("h4",{children:"Bot Type:"})," ",Object(u.jsx)("span",{children:n})]}),Object(u.jsxs)("div",{className:"recap-info",children:[Object(u.jsx)("h4",{children:"Depth:"})," ",Object(u.jsx)("span",{children:a})]})]}),Object(u.jsx)(je.a,{}),Object(u.jsx)("div",{className:"recap-body",children:Object(u.jsxs)(ue.a,{children:[Object(u.jsx)(be.a,{expandIcon:Object(u.jsx)(me.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(u.jsx)("h4",{children:"Move History"})}),Object(u.jsx)(he.a,{children:Object(u.jsx)(b,{movesHistory:c,className:"recap"})})]})})]})})},ve=n(398),fe=function(e){var t=e.isLoggedIn,n=e.setIsLoggedIn,c=Object(a.useState)([]),s=Object(r.a)(c,2),o=s[0],i=s[1];Object(a.useEffect)((function(){!function(){var e=T.a.create({baseURL:"https://chess-ai-visualizer.herokuapp.com/"}).get("games",{headers:{Authorization:"token ".concat(localStorage.getItem("token"))}});e.then((function(e){console.log(e.data),i(e.data.games),console.log(o)})).catch((function(e){console.log(e)}))}()}),[]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(F,{className:"nav-full",isLoggedIn:t,setIsLoggedIn:n}),o.length>0?Object(u.jsxs)("div",{className:"prev-games",children:[Object(u.jsx)("h2",{children:"Previous Games"}),o.map((function(e){return Object(u.jsx)(Oe,{result:e.result?"Win":"Loss",botType:e.botType,depth:e.depth,moveHistory:e.moves})}))]}):Object(u.jsx)("div",{className:"loader",children:Object(u.jsx)(ve.a,{color:"secondary"})})]})};var ge=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:"app-container",children:Object(u.jsxs)(M.c,{children:[Object(u.jsx)(M.a,{exact:!0,path:"/",children:Object(u.jsx)(le,{isLoggedIn:n,setIsLoggedIn:c})}),Object(u.jsx)(M.a,{path:"/games",children:Object(u.jsx)(fe,{isLoggedIn:n,setIsLoggedIn:c})})]})})})},xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,407)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),s(e),o(e)}))},Ne=n(88);o.a.render(Object(u.jsx)(Ne.a,{children:Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(ge,{})})}),document.getElementById("root")),xe()}},[[342,1,2]]]);
//# sourceMappingURL=main.5947b6a0.chunk.js.map